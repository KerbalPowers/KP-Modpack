PART
{
    // --- general parameters ---
    name = 1875_Turbojet
    module = Part
    author = Spartwo

    // --- asset parameters ---
    mesh = model.mu
    scale = 1.0
    rescaleFactor = 1
	CoMOffset = 0, 3.5, 0

    // --- node definitions ---
    node_stack_top = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0

    // --- editor parameters ---
    TechRequired = supersonicFlight
    entryCost = 14000
    cost = 6000
    category = Engine
    subcategory = 0
    title = J-808 "Leopard" Afterburning Turbofan
    manufacturer = #autoLOC_501624 //#autoLOC_501624 = C7 Aerospace Division
    description =  A high performance jet engine with sustained afterburning capacity. Perfect choice when brute force is required. Slow RPM change necessitates longer than usual takeoff roll and landing approaches.

    // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
    attachRules = 1,0,1,0,0

    // --- standard part parameters ---
    mass = 2.75
    dragModelType = default
    maximum_drag = 0.2
    minimum_drag = 0.2
    angularDrag = 2
    crashTolerance = 7
    breakingForce = 75
    breakingTorque = 75
    maxTemp = 2000 // = 3600
	skinInternalConductionMult = 4.0
	emissiveConstant = 0.8
	bulkheadProfiles = size1p5
    tags = aircraft burner engine hybrid jet maneuver manoeuvre supersonic turb

	EFFECTS
	{		
		running_dry
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = smokePoint
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
                fixedScale = 1.3
			}
			AUDIO
			{
				channel = Ship
				clip = sound_jet_low
				volume = 0.0 0.0
				volume = 0.05 0.2
				volume = 1.0 0.4
				pitch = 0.0 0.2
				pitch = 0.05 0.4
				pitch = 1.0 0.5
				loop = true
			}
		}

		power_dry
		{
			AUDIO
			{
				channel = Ship
				clip = sound_jet_deep
				volume = 0.0 0.0
				volume = 0.05 0.6
				volume = 1.0 1.3
				pitch = 0.0 0.3
				pitch = 1.0 0.6
				loop = true
			}
		}
		running_wet
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_light
				transformName = smokePoint
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.5
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
                fixedScale = 1.3
			}
			AUDIO
			{
				channel = Ship
				clip = sound_jet_low
				volume = 0.0 0.0
				volume = 0.05 0.2
				volume = 1.0 0.35
				pitch = 0.0 0.2
				pitch = 0.05 0.4
				pitch = 1.0 0.6
				loop = true
			}
		}
		power_wet
		{

			AUDIO
			{
				channel = Ship
				clip = sound_rocket_spurts
				volume = 0.0 0.0
				volume = 0.1 0.4
				volume = 1.0 1.0
				pitch = 0.0 0.5
				pitch = 0.33 0.8
				pitch = 1.0 1.5
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/afterburner_shock
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.05
				emission = 0.33 0.1
				emission = 1.0 1.0
				speed = 0.0 0.0
				speed = 0.05 0.05
				speed = 0.33 0.16
				speed = 1.0 1.0
				energy = 0.0 1.5
				energy = 0.33 1.0
				energy = 1.0 1.0
				localOffset = -1, 0, 0
				localScale = 1.2, 1.2, 1.2
				localRotation = 1, 0, 0, -90
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_medium
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = flamePoint
				localRotation = 0, 0, 90
				localOffset = 0, 0, 0
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}
	

	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = Dry
		secondaryEngineID = Wet
		carryOverThrottle = True
		autoSwitchAvailable = False
	}

    MODULE
    {
        name = ModuleEnginesFX
        engineID = Dry
        thrustVectorTransformName = thrustTransform
        exhaustDamage = True
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 230
        heatProduction = 120 // Modified in global config
        useEngineResponseTime = True
        engineAccelerationSpeed = 0.12
        engineDecelerationSpeed = 0.21
        useVelocityCurve = False
		spoolEffectName = running_dry
        EngineType = Turbine
		PROPELLANT
        {
            name = LiquidFuel
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
            ratio = 1
            DrawGauge = True
        }
        PROPELLANT
        {
            name = IntakeAir
            ignoreForIsp = True
			ratio = 21
        }
        atmosphereCurve
        {
            key = 0 7500 0 0
        }
        atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		machLimit = 2.75
		machHeatMult = 100.0
        velCurve
		{
			key = 0 1 0 0
			key = 0.35 0.932 0 0
			key = 1 1.13 0.4510796 0.4510796
			key = 1.75 1.5 0 0
			key = 2 1.38 -1.126258 -1.126258
			key = 2.5 0 0 0
		}
		atmCurve
		{
			key = 0 0 0 0
			key = 0.004 0 0 0
			key = 0.01 0 0 24.66405
			key = 0.025 0.3 12.70155 9.942778
			key = 0.066 0.5 2.253424 1.855385
			key = 0.177 0.68 1.236898 0.7532317
			key = 0.287 1 0 0
			key = 0.45 1 0 0
			key = 0.681 0.9 -0.6780213 -0.458771
			key = 0.723 0.82 -1.373148 -1.096758
			key = 0.862 0.73 0 -0.1517787
			key = 1 0.65 -1.06318 0
		}
    }

    MODULE
    {
        name = ModuleEnginesFX
        engineID = Wet
        thrustVectorTransformName = thrustTransform
        exhaustDamage = True
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 360
        heatProduction = 160 // Modified in global config
        useEngineResponseTime = True
        engineAccelerationSpeed = 0.8
        engineDecelerationSpeed = 0.8
        useVelocityCurve = False
		spoolEffectName = running_wet
		powerEffectName = power_wet
        EngineType = Turbine
		PROPELLANT
        {
            name = LiquidFuel
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
            ratio = 1
            DrawGauge = True
        }
        PROPELLANT
        {
            name = IntakeAir
            ignoreForIsp = True
			ratio = 12
        }
        atmosphereCurve
        {
            key = 0 4000 0 0
        }
        atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		machLimit = 2.75
		machHeatMult = 100.0
		velCurve
		{
			key = 0 1 0 0
			key = 0.18 0.97 0 0
			key = 0.43 1 0.202683 0.202683
			key = 1 1.42 1.280302 1.280302
			key = 2.5 3.63 0 0
			key = 3 0.58 -2.708558 -2.708558
			key = 3.35 0 -0.6150925 0
		}
		atmCurve
		{
			// less linear because AB has a big ram effect at high speed at high alt.
			key = 0 0 0 0
			key = 0.004 0 0 1.778905
			key = 0.01 0.04 8.20717 6.525577
			key = 0.025 0.15 7.493673 5.689399
			key = 0.066 0.3 1.842968 1.855385
			key = 0.177 0.4 0.9743952 0.6506976
			key = 0.287 0.68 2.77644 3.360579
			key = 0.45 1 0 -0.0128334
			key = 0.681 1 0.01541226 -0.1002935
			key = 0.723 1 -0.1220559 -0.01162103
			key = 0.862 1 0.01654163 -0.06030282
			key = 1 1 -0.01773409 0
		}
    }

	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = jet_turbofan_heat
		responseSpeed = 0.01
		layer = 1
		dependOnEngineState = True
		dependOnThrottle = True
		engineName = Wet
	}

    MODULE
    {
        name = ModuleAlternator
        RESOURCE
        {
            name = ElectricCharge
            rate = 5.0
        }
    }

    RESOURCE
    {
        name = ElectricCharge
        amount = 0
        maxAmount = 0
        isTweakable = false
        hideFlow = true
    }

    MODULE
	{
		name = ModuleTestSubject
		useStaging = True
		useEvent = True
		situationMask = 15
		CONSTRAINT
		{
			type = OXYGEN
			value = True
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 200
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 100
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 100
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 50
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = LT
			value = 50
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEEDENV
			test = GT
			value = 20
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 500
			situationMask = 8
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 250
			situationMask = 8
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 750
			situationMask = 8
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 350
			situationMask = 8
			prestige = Significant
		}
		CONSTRAINT
		{
			type = SPEED
			test = LT
			value = 1000
			situationMask = 8
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = SPEED
			test = GT
			value = 700
			situationMask = 8
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = DENSITY
			test = GT
			value = 0.17
			situationMask = 8
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = DENSITY
			test = GT
			value = 0.75
			situationMask = 8
			prestige = Significant
		}
		CONSTRAINT
		{
			type = DENSITY
			test = GT
			value = 0.02
			situationMask = 8
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 4000
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 8000
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 1000
			prestige = Significant
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 2000
			prestige = Significant
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = GT
			value = 500
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = ALTITUDEENV
			test = LT
			value = 1000
			prestige = Exceptional
		}
		CONSTRAINT
		{
			type = REPEATABILITY
			value = ALWAYS
			prestige = Trivial
		}
		CONSTRAINT
		{
			type = REPEATABILITY
			value = BODYANDSITUATION
			prestige = Significant
		}
		CONSTRAINT
		{
			type = REPEATABILITY
			value = ONCEPERPART
			prestige = Exceptional
		}
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 1
		fxMax = 0.6
		maxDistance = 25
		falloff = 2
		thrustTransformName = thrust_transform
	}

	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 2
		fxMax = 0.6
		maxDistance = 25
		falloff = 2
		thrustTransformName = thrust_transform
	}
}
