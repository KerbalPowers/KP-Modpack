PART
{
	// Kerbal Space Program - Part Config
	//
	//

	// --- general parameters ---
	name = Mk141Launcher
	module = Part
	author = Spartwo

	// --- asset parameters ---
	mesh = Mk141.mu
	rescaleFactor = 1


	// --- node definitions ---
	node_attach = 0.0, 0.0, 0, 0, 0, 1, 0
	//node_stack_bottom = 0.0, -2.5, 0.0, 0.0, -1.0, 0.0, 1
	node_stack_rail = 0, 0, 1.2, 0, 1, 0, 0
	// --- editor parameters ---
	TechRequired = precisionEngineering
	entryCost = 10000
	cost = 2000
	category = none
	bdacategory = Missile turrets
	subcategory = 0
	
	title = Mk141 "Gaff" Launcher
	manufacturer = Gladia Fleetworks
	description = This deck-mounted Launch System assembly is perfect for air defence missiles. Attach a missile to the top node to load the launcher with that type of missile. Missiles sold separately.
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 1,1,1,1,1
	
	// --- standard part parameters ---
	mass = 1
	dragModelType = default
	maximum_drag = 0.01
	minimum_drag = 0.01
	angularDrag = 2
	crashTolerance = 60
	maxTemp = 3600
	bulkheadProfiles = srf
	tags = #loc_BDArmory_part_VLScell_tags

	MODULE
	{
		name = ModulePartVariants
		baseVariant = Double
		useMultipleDragCubes = false
		VARIANT
		{
			name = Double
			displayName = Double Support
			themeName = Standard
			primaryColor = #ffffff
			secondaryColor = #999999
			GAMEOBJECTS
			{
				MidMount = true
				MM1 = true
				MM2 = true
				MM3 = true
				MM4 = true
				
				RearMount = true
				RM1 = true
				RM2 = true
				RM3 = true
				RM4 = true
			}
		}
		VARIANT
		{
			name = Fore
			displayName = Fore Only
			themeName = Standard
			primaryColor = #ffffff
			secondaryColor = #999999
			GAMEOBJECTS
			{
				MidMount = true
				MM1 = true
				MM2 = true
				MM3 = true
				MM4 = true
				
				RearMount = false
				RM1 = false
				RM2 = false
				RM3 = false
				RM4 = false
			}
		}
		VARIANT
		{
			name = Rear
			displayName = Rear Only
			themeName = Standard
			primaryColor = #ffffff
			secondaryColor = #999999
			GAMEOBJECTS
			{
				MidMount = false
				MM1 = false
				MM2 = false
				MM3 = false
				MM4 = false
				
				RearMount = true
				RM1 = true
				RM2 = true
				RM3 = true
				RM4 = true
			}
		}
		VARIANT
		{
			name = None
			displayName = No Supports
			themeName = Standard
			primaryColor = #ffffff
			secondaryColor = #999999
			GAMEOBJECTS
			{
				MidMount = false
				MM1 = false
				MM2 = false
				MM3 = false
				MM4 = false
				
				RearMount = false
				RM1 = false
				RM2 = false
				RM3 = false
				RM4 = false
			}
		}
	}
	
	MODULE
	{
		name = MissileLauncher

		shortName = Mk141 Tube
		thrust = 55 //Used by Weaponmanager for selection, doesn't need to mirror submunition
		guidanceActive = true
		maxTurnRateDPS = 35// This + thrust used for Weapon selection, 
		optimumAirspeed = 1372 //used to perform DLZ checks, which controls when it will be launched
		missileType = missile
		homingType = aam //subMunition homing type

		targetingType = radar
		activeRadarRange = 30000
		maxOffBoresight = 1026 //ensure 360deg FoV (boresight val used by AI is 0.35 - 0.85x listed value)
		uncagedLock = false  
		minStaticLaunchRange = 2000 //set these to submunition values
		maxStaticLaunchRange = 30000 

		engageAir = true
		engageMissile = false
		engageGround = false
		engageSLW = false
	}


	MODULE
	{
		name = MultiMissileLauncher
		deployAnimationName = HatchDeploy
		deploySpeed = 0.75
		launchTransformName = launchers //name of launch transforms
		subMunitionName = 
		subMunitionPath = 
		salvoSize = 1
		setSalvoSize = true //allow setting salvo size in SPH/VAB
		isMultiLauncher = true
		overrideReferenceTransform = true //use vessel forward dir instead of missile dir for targeting, 
		//override missile boresight with launcher value for determinining if missile is on target for launch
		RailNode = rail
		tntMass = 25
		permitJettison = false
		OverrideDropSettings = true
		scaleTransformName = HatchMount //transform name for model scaling
		lengthTransformName = Tube //transform name for length scaling
		Length = 1
		ignoreLauncherColliders = true //temporarily disable missile colliders to let them clear the launcher, for large-scale VLS or similar. -WARNING- has some effect on missile flight, do not use with launchers firing preset ordinance
	}

	MODULE
	{
		name = ModuleMissileRearm
		reloadTime = 120
		AccountForAmmo = true
		MissileName = 
		ammoCount = 1
		maxAmmo = 4
	}

}
